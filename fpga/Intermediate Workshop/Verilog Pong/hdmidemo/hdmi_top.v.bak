module hdmi_top (
    input wire clk_50,         // 50 MHz input
    input wire reset_n,        // Active-low reset
    output wire [23:0] hdmi_tx_d, // RGB data
    output wire hdmi_tx_de,    // Data Enable
    output wire hdmi_tx_hs,    // Horizontal Sync
    output wire hdmi_tx_vs,    // Vertical Sync
    output wire hdmi_tx_clk,   // Pixel Clock
    inout wire i2c_sda,        // I2C Data
    output wire i2c_scl        // I2C Clock
);

    wire clk_pixel;
    wire locked;

    pll_74mhz pll_inst (
        .inclk0(clk_50),
        .c0(clk_pixel),
        .locked(locked)
    );

    wire [11:0] hcount;
    wire [11:0] vcount;
    wire hsync, vsync, de;

    video_timing timing_inst (
        .clk(clk_pixel),
        .reset(~reset_n),
        .hcount(hcount),
        .vcount(vcount),
        .hsync(hsync),
        .vsync(vsync),
        .de(de)
    );

    pattern_gen bars_inst (
        .hcount(hcount),
        .vcount(vcount),
        .rgb(hdmi_tx_d)
    );

    assign hdmi_tx_de  = de;
    assign hdmi_tx_hs  = hsync;
    assign hdmi_tx_vs  = vsync;
    assign hdmi_tx_clk = clk_pixel;

    i2c_config config_inst (
        .clk(clk_pixel),
        .reset(~locked),
        .scl(i2c_scl),
        .sda(i2c_sda)
    );

endmodule
