// renderer.v â€” draws paddles, ball, border, and on-screen scores (tiny 8x12 font)
module renderer #(parameter H_ACTIVE=1280, V_ACTIVE=720) (
    input  wire [11:0] hcount,
    input  wire [11:0] vcount,
    input  wire        de,
    input  wire [10:0] p1_y,
    input  wire [10:0] p2_y,
    input  wire [10:0] ball_x,
    input  wire [10:0] ball_y,
    input  wire [3:0]  score_l,
    input  wire [3:0]  score_r,
    output reg  [23:0] rgb
);
    localparam PADDLE_H = 100;
    localparam PADDLE_W = 12;
    localparam BALL_S   = 10;
    localparam integer P1_X = 40;
    localparam integer P2_X = H_ACTIVE - 40 - PADDLE_W;
    localparam integer BORDER = 8;

    // objects
    wire on_border =
        (hcount < BORDER) || (hcount >= H_ACTIVE - BORDER) ||
        (vcount < BORDER) || (vcount >= V_ACTIVE - BORDER);

    wire on_p1 = (hcount >= P1_X) && (hcount < P1_X + PADDLE_W) &&
                 (vcount >= p1_y) && (vcount < p1_y + PADDLE_H);

    wire on_p2 = (hcount >= P2_X) && (hcount < P2_X + PADDLE_W) &&
                 (vcount >= p2_y) && (vcount < p2_y + PADDLE_H);

    wire on_ball = (hcount >= ball_x) && (hcount < ball_x + BALL_S) &&
                   (vcount >= ball_y) && (vcount < ball_y + BALL_S);

    // score rendering (8x12 font), positions
    wire pix_score_l, pix_score_r;
    score_draw #(.X0( (H_ACTIVE/2)-60 ), .Y0(20)) drawL (
        .x(hcount), .y(vcount), .digit(score_l), .pix(pix_score_l)
    );
    score_draw #(.X0( (H_ACTIVE/2)+36 ), .Y0(20)) drawR (
        .x(hcount), .y(vcount), .digit(score_r), .pix(pix_score_r)
    );

    always @(*) begin
        if (!de)                       rgb = 24'h000000;
        else if (on_border)            rgb = 24'hFFFFFF;
        else if (pix_score_l|pix_score_r) rgb = 24'hFFFFFF;
        else if (on_p1 | on_p2)        rgb = 24'hFFFFFF;
        else if (on_ball)              rgb = 24'hFFFF00;
        else                           rgb = 24'h000040; // dark blue field
    end
endmodule
