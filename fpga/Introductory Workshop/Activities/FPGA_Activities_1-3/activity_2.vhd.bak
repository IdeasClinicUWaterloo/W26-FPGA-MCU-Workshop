-- ========================================
-- ACTIVITY 2: activity2_switch_display.vhd
-- Switch to Seven-Segment Display
-- ========================================
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.NUMERIC_STD.ALL;

entity activity2_switch_display is
    Port (
        SW : in STD_LOGIC_VECTOR(3 downto 0);    -- SW[3:0] (or SW[7:4] from main)
        HEX0 : out STD_LOGIC_VECTOR(6 downto 0)
    );
end activity2_switch_display;

architecture Behavioral of activity2_switch_display is
    
    signal digit : integer range 0 to 9;
    
    -- Function: Convert digit (0-9) to 7-segment display
    function digit_to_7seg(d : integer) return STD_LOGIC_VECTOR is
        variable seg : STD_LOGIC_VECTOR(6 downto 0);
    begin
        case d is
            when 0 => seg := "1000000"; -- 0
            when 1 => seg := "1111001"; -- 1
            when 2 => seg := "0100100"; -- 2
            when 3 => seg := "0110000"; -- 3
            when 4 => seg := "0011001"; -- 4
            when 5 => seg := "0010010"; -- 5
            when 6 => seg := "0000010"; -- 6
            when 7 => seg := "1111000"; -- 7
            when 8 => seg := "0000000"; -- 8
            when 9 => seg := "0010000"; -- 9
            when others => seg := "1111111"; -- Blank
        end case;
        return seg;
    end function;
    
begin
    
    -- Determine which switch is active (priority encoder)
    process(SW)
    begin
        if SW(0) = '1' then
            digit <= 0;  -- or 4 if using SW[7:4]
        elsif SW(1) = '1' then
            digit <= 1;  -- or 5 if using SW[7:4]
        elsif SW(2) = '1' then
            digit <= 2;  -- or 6 if using SW[7:4]
        elsif SW(3) = '1' then
            digit <= 3;  -- or 7 if using SW[7:4]
        else
            digit <= 0;  -- Default: show 0 when no switch is active
        end if;
    end process;
    
    -- Convert digit to 7-segment display
    HEX0 <= digit_to_7seg(digit);
    
end Behavioral;